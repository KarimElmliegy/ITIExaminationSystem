@{
    Layout = "~/Views/Shared/_DashboardLayout.cshtml";
    ViewBag.UserRole = "Admin";
    ViewBag.Title = "Dashboard";
}
@model dynamic

@section Styles {
    <link href="/css/Admin.css" rel="stylesheet" />
}

<!-- ===== STATS ===== -->
<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon">👨‍🎓</div>
        <div class="stat-info">
            <h3>Total Students</h3>
            <p id="stat-students">@ViewBag.StudentCount</p>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-icon">👨‍🏫</div>
        <div class="stat-info">
            <h3>Instructors</h3>
            <p id="stat-instructors">@ViewBag.InstructorCount</p>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-icon">📚</div>
        <div class="stat-info">
            <h3>Active Courses</h3>
            <p id="stat-courses">@ViewBag.CourseCount</p>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-icon">🏢</div>
        <div class="stat-info">
            <h3>Branches</h3>
            <p id="stat-branches">@ViewBag.BranchCount</p>
        </div>
    </div>
</div>

<!-- ===== STUDENTS TAB ===== -->
<div id="tab-students" class="content-tab">
    <div class="data-panel">
        <div class="panel-header">
            <h2 class="panel-title">👨‍🎓 Student Management</h2>
            <button class="btn-add" onclick="openModal('student')">+ Add Student</button>
        </div>

        <!-- Carousel Navigation -->
        <div class="carousel-controls">
            <button class="carousel-btn-circle" id="studentsPrevBtn" onclick="moveCarousel('students', -1)">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#667eea" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
            </button>

            <div class="carousel-info">
                <span class="carousel-indicator">
                    Page <span id="studentsCurrentPage">1</span> of <span id="studentsTotalPages">1</span>
                </span>
            </div>

            <button class="carousel-btn-circle" id="studentsNextBtn" onclick="moveCarousel('students', 1)">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#667eea" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
            </button>
        </div>

        <!-- Carousel Container -->
        <div class="table-carousel-container">
            <div class="table-carousel-wrapper" id="studentsTableCarousel">
                <table id="table-students">
                    <thead>
                        <tr>
                            <th>Student ID</th>
                            <th>User ID</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Branch</th>
                            <th>Track</th>
                            <th>Intake</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="studentsTableBody">
                        @foreach (var s in ViewBag.Students)
                        {
                            <tr class="carousel-row" data-entity-type="student" data-student-id="@s.StudentId" data-user-id="@s.UserId">
                                <td>@s.StudentId</td>
                                <td>@s.UserId</td>
                                <td style="font-weight: 600; color: #667eea">@s.UserName</td>
                                <td>@s.UserEmail</td>
                                <td>@s.BranchName</td>
                                <td><span class="badge badge-purple">@s.TrackName</span></td>
                                <td>@s.IntakeNumber</td>
                                <td>
                                    <button class="action-btn btn-edit" onclick="openEditStudentModal('@s.StudentId','@s.UserName','@s.UserEmail','@s.BranchId','@s.TrackId','@s.IntakeNumber')">Edit</button>
                                    <button class="action-btn btn-delete"
                                            data-student-id="@s.StudentId"
                                            data-user-name="@s.UserName"
                                            data-user-email="@s.UserEmail"
                                            data-entity-type="student">
                                        Delete
                                    </button>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Carousel Dots Navigation -->
        <div class="carousel-dots" id="studentsCarouselDots"></div>
    </div>
</div>

<!-- ===== INSTRUCTORS TAB ===== -->
<div id="tab-instructors" class="content-tab hidden">
    <div class="data-panel">
        <div class="panel-header">
            <h2 class="panel-title">👨‍🏫 Instructor Management</h2>
            <button class="btn-add" onclick="openModal('instructor')">+ Add Instructor</button>
        </div>

        <!-- Carousel Navigation -->
        <div class="carousel-controls">
            <button class="carousel-btn-circle" id="instructorsPrevBtn" onclick="moveCarousel('instructors', -1)">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#667eea" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
            </button>

            <div class="carousel-info">
                <span class="carousel-indicator">
                    Page <span id="instructorsCurrentPage">1</span> of <span id="instructorsTotalPages">1</span>
                </span>
            </div>

            <button class="carousel-btn-circle" id="instructorsNextBtn" onclick="moveCarousel('instructors', 1)">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#667eea" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
            </button>
        </div>

        <!-- Carousel Container -->
        <div class="table-carousel-container">
            <div class="table-carousel-wrapper" id="instructorsTableCarousel">
                <table id="table-instructors">
                    <thead>
                        <tr>
                            <th>Instructor ID</th>
                            <th>User ID</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="instructorsTableBody">
                        @foreach (var i in ViewBag.Instructors)
                        {
                            <tr class="carousel-row" data-entity-type="instructor" data-instructor-id="@i.InstructorId" data-user-id="@i.UserId">
                                <td>@i.InstructorId</td>
                                <td>@i.UserId</td>
                                <td style="font-weight: 600; color: #667eea">@i.UserName</td>
                                <td>@i.UserEmail</td>
                                <td>
                                    <button class="action-btn btn-edit" onclick="openEditInstructorModal('@i.InstructorId','@i.UserName','@i.UserEmail')">Edit</button>
                                    <button class="action-btn btn-delete"
                                            data-instructor-id="@i.InstructorId"
                                            data-user-name="@i.UserName"
                                            data-user-email="@i.UserEmail"
                                            data-entity-type="instructor">
                                        Delete
                                    </button>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Carousel Dots Navigation -->
        <div class="carousel-dots" id="instructorsCarouselDots"></div>
    </div>
</div>

<!-- ===== COURSES TAB ===== -->
<div id="tab-courses" class="content-tab hidden">
    <div class="data-panel">
        <div class="panel-header">
            <h2 class="panel-title">📚 Course Management</h2>
            <button class="btn-add" onclick="openModal('course')">+ Add Course</button>
        </div>

        <!-- Carousel Navigation -->
        <div class="carousel-controls">
            <button class="carousel-btn-circle" id="coursesPrevBtn" onclick="moveCarousel('courses', -1)">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#667eea" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
            </button>

            <div class="carousel-info">
                <span class="carousel-indicator">
                    Page <span id="coursesCurrentPage">1</span> of <span id="coursesTotalPages">1</span>
                </span>
            </div>

            <button class="carousel-btn-circle" id="coursesNextBtn" onclick="moveCarousel('courses', 1)">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#667eea" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
            </button>
        </div>

        <!-- Carousel Container -->
        <div class="table-carousel-container">
            <div class="table-carousel-wrapper" id="coursesTableCarousel">
                <table id="table-courses">
                    <thead>
                        <tr>
                            <th>Course ID</th>
                            <th>Course Name</th>
                            <th>Tries Limit</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="coursesTableBody">
                        @foreach (var c in ViewBag.Courses)
                        {
                            <tr class="carousel-row" data-entity-type="course" data-course-id="@c.CourseId">
                                <td>@c.CourseId</td>
                                <td>@c.CourseName</td>
                                <td>@(c.TriesLimit != null ? c.TriesLimit.ToString() : "Unlimited")</td>
                                <td>
                                    <button class="action-btn btn-edit" onclick="openEditCourseModal('@c.CourseId','@c.CourseName','@c.TriesLimit')">Edit</button>
                                    <button class="action-btn btn-delete"
                                            data-course-id="@c.CourseId"
                                            data-course-name="@c.CourseName"
                                            data-entity-type="course">
                                        Delete
                                    </button>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Carousel Dots Navigation -->
        <div class="carousel-dots" id="coursesCarouselDots"></div>
    </div>
</div>

<!-- ===== BRANCHES TAB ===== -->
<div id="tab-branches" class="content-tab hidden">
    <div class="data-panel">
        <div class="panel-header">
            <h2 class="panel-title">🏢 Branch Management</h2>
            <button class="btn-add" onclick="openModal('branch')">+ Add Branch</button>
        </div>

        <!-- Carousel Navigation -->
        <div class="carousel-controls">
            <button class="carousel-btn-circle" id="branchesPrevBtn" onclick="moveCarousel('branches', -1)">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#667eea" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
            </button>

            <div class="carousel-info">
                <span class="carousel-indicator">
                    Page <span id="branchesCurrentPage">1</span> of <span id="branchesTotalPages">1</span>
                </span>
            </div>

            <button class="carousel-btn-circle" id="branchesNextBtn" onclick="moveCarousel('branches', 1)">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#667eea" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
            </button>
        </div>

        <!-- Carousel Container -->
        <div class="table-carousel-container">
            <div class="table-carousel-wrapper" id="branchesTableCarousel">
                <table id="table-branches">
                    <thead>
                        <tr>
                            <th>Branch ID</th>
                            <th>Branch Name</th>
                            <th>Location</th>
                            <th>Student Count</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="branchesTableBody">
                        @if (ViewBag.Branches != null)
                        {
                            @foreach (var b in ViewBag.Branches)
                            {
                                <tr class="carousel-row" data-entity-type="branch" data-branch-id="@b.BranchId">
                                    <td>@b.BranchId</td>
                                    <td>@b.BranchName</td>
                                    <td>@b.BranchLocation</td>
                                    <td>
                                        @{
                                            // Calculate student count for this branch
                                            var branchStudentCount = 0;
                                            if (ViewBag.Students != null)
                                            {
                                                branchStudentCount = ((IEnumerable<dynamic>)ViewBag.Students)
                                                .Count(s => s.BranchId == b.BranchId);
                                            }
                                        }
                                        @branchStudentCount
                                    </td>
                                    <td>
                                        <button class="action-btn btn-edit" onclick="openEditBranchModal('@b.BranchId','@b.BranchName','@b.BranchLocation')">Edit</button>
                                        <button class="action-btn btn-delete"
                                                data-branch-id="@b.BranchId"
                                                data-branch-name="@b.BranchName"
                                                data-entity-type="branch">
                                            Delete
                                        </button>
                                    </td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Carousel Dots Navigation -->
        <div class="carousel-dots" id="branchesCarouselDots"></div>
    </div>
</div>

<!-- ===== TRACKS TAB ===== -->
<div id="tab-tracks" class="content-tab hidden">
    <div class="data-panel">
        <div class="panel-header">
            <h2 class="panel-title">🎯 Track Management</h2>
            <button class="btn-add" onclick="openModal('track')">+ Add Track</button>
        </div>

        <!-- Carousel Navigation -->
        <div class="carousel-controls">
            <button class="carousel-btn-circle" id="tracksPrevBtn" onclick="moveCarousel('tracks', -1)">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#667eea" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
            </button>

            <div class="carousel-info">
                <span class="carousel-indicator">
                    Page <span id="tracksCurrentPage">1</span> of <span id="tracksTotalPages">1</span>
                </span>
            </div>

            <button class="carousel-btn-circle" id="tracksNextBtn" onclick="moveCarousel('tracks', 1)">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#667eea" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
            </button>
        </div>

        <!-- Carousel Container -->
        <div class="table-carousel-container">
            <div class="table-carousel-wrapper" id="tracksTableCarousel">
                <table id="table-tracks">
                    <thead>
                        <tr>
                            <th>Track ID</th>
                            <th>Track Name</th>
                            <th>Student Count</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="tracksTableBody">
                        @if (ViewBag.Tracks != null)
                        {
                            @foreach (var t in ViewBag.Tracks)
                            {
                                <tr class="carousel-row" data-entity-type="track" data-track-id="@t.TrackId">
                                    <td>@t.TrackId</td>
                                    <td>@t.TrackName</td>
                                    <td>
                                        @{
                                            // Calculate student count for this track
                                            var studentCount = 0;
                                            if (ViewBag.Students != null)
                                            {
                                                studentCount = ((IEnumerable<dynamic>)ViewBag.Students)
                                                .Count(s => s.TrackId == t.TrackId);
                                            }
                                        }
                                        @studentCount
                                    </td>
                                    <td>
                                        <button class="action-btn btn-edit" onclick="openEditTrackModal('@t.TrackId','@t.TrackName')">Edit</button>
                                        <button class="action-btn btn-delete"
                                                data-track-id="@t.TrackId"
                                                data-track-name="@t.TrackName"
                                                data-entity-type="track">
                                            Delete
                                        </button>
                                    </td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Carousel Dots Navigation -->
        <div class="carousel-dots" id="tracksCarouselDots"></div>
    </div>
</div>

<!-- ===== MODAL OVERLAY ===== -->
<div id="modal-overlay" class="modal-overlay hidden">
    <!-- ADD STUDENT MODAL -->
    <div id="modal-student" class="modal-box hidden">
        <h2 class="modal-title">Add New Student</h2>
        <form id="studentForm">
            <div id="step-1">
                <div class="form-group">
                    <label>Student Name</label>
                    <input type="text" id="inp-stud-name" class="form-input" required placeholder="e.g. Ahmed Ali" />
                </div>
                <div class="form-group">
                    <label>Branch</label>
                    <select id="inp-stud-branch" class="form-input" required>
                        <option value="">Select Branch</option>
                        @foreach (var branch in ViewBag.Branches)
                        {
                            <option value="@branch.BranchId">@branch.BranchName</option>
                        }
                    </select>
                </div>
                <div class="form-group">
                    <label>Track</label>
                    <select id="inp-stud-track" class="form-input" required>
                        <option value="">Select Track</option>
                        @foreach (var track in ViewBag.Tracks)
                        {
                            <option value="@track.TrackId">@track.TrackName</option>
                        }
                    </select>
                </div>
                <div class="form-group">
                    <label>Intake Number</label>
                    <input type="number" id="inp-stud-intake" class="form-input" required min="1" placeholder="e.g. 46" />
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-cancel" onclick="closeModal()">Cancel</button>
                    <button type="button" class="btn-next action-btn" onclick="showStep2()">Next: Login Info →</button>
                </div>
            </div>
            <div id="step-2" style="display: none;">
                <div class="banner-info">
                    ℹ️ Set the login credentials for this student.
                </div>
                <div class="form-group">
                    <label>Email (Username)</label>
                    <input type="email" id="inp-stud-email" class="form-input" required placeholder="student@iti.gov.eg" />
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="inp-stud-password" class="form-input" required placeholder="******" />
                </div>
                <div class="form-group">
                    <label>Confirm Password</label>
                    <input type="password" id="inp-stud-confirm" class="form-input" required placeholder="******" />
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-cancel" onclick="showStep1()">← Back</button>
                    <button type="button" class="btn-add" onclick="handleAddStudent()">Create Account</button>
                </div>
            </div>
        </form>
    </div>

    <!-- ADD INSTRUCTOR MODAL -->
    <div id="modal-instructor" class="modal-box hidden">
        <h2 class="modal-title">Add New Instructor</h2>
        <form id="instructorForm">
            <div class="form-group">
                <label>Full Name</label>
                <input type="text" id="inp-inst-name" class="form-input" required placeholder="e.g. Dr. Sara Hassan" />
            </div>
            <div class="form-group">
                <label>Email</label>
                <input type="email" id="inp-inst-email" class="form-input" required placeholder="instructor@iti.gov.eg" />
            </div>
            <div class="form-group">
                <label>Password</label>
                <input type="password" id="inp-inst-password" class="form-input" required placeholder="******" />
            </div>
            <div class="form-group">
                <label>Confirm Password</label>
                <input type="password" id="inp-inst-confirm" class="form-input" required placeholder="******" />
            </div>
            <div class="modal-actions">
                <button type="button" class="btn-cancel" onclick="closeModal()">Cancel</button>
                <button type="button" class="btn-add" onclick="handleAddInstructor()">Save Instructor</button>
            </div>
        </form>
    </div>

    <!-- ADD COURSE MODAL -->
    <div id="modal-course" class="modal-box hidden">
        <h2 class="modal-title">Add New Course</h2>
        <form id="courseForm">
            <div class="form-group">
                <label>Course Name</label>
                <input type="text" id="inp-course-name" class="form-input" required placeholder="e.g. Web Development" />
            </div>
            <div class="form-group">
                <label>Tries Limit (Optional)</label>
                <input type="number" id="inp-course-tries" class="form-input" min="1" placeholder="e.g. 3 (leave empty for unlimited)" />
            </div>
            <div class="modal-actions">
                <button type="button" class="btn-cancel" onclick="closeModal()">Cancel</button>
                <button type="button" class="btn-add" onclick="handleAddCourse()">Save Course</button>
            </div>
        </form>
    </div>

    <!-- ADD BRANCH MODAL -->
    <div id="modal-branch" class="modal-box hidden">
        <h2 class="modal-title">Add New Branch</h2>
        <form id="branchForm">
            <div class="form-group">
                <label>Branch Name</label>
                <input type="text" id="inp-branch-name" class="form-input" required placeholder="e.g. Cairo Branch" />
            </div>
            <div class="form-group">
                <label>Branch Location</label>
                <input type="text" id="inp-branch-location" class="form-input" required placeholder="e.g. Cairo, Egypt" />
            </div>
            <div class="modal-actions">
                <button type="button" class="btn-cancel" onclick="closeModal()">Cancel</button>
                <button type="button" class="btn-add" onclick="handleAddBranch()">Save Branch</button>
            </div>
        </form>
    </div>

    <!-- ADD TRACK MODAL -->
    <div id="modal-track" class="modal-box hidden">
        <h2 class="modal-title">Add New Track</h2>
        <form id="trackForm">
            <div class="form-group">
                <label>Track Name</label>
                <input type="text" id="inp-track-name" class="form-input" required placeholder="e.g. Full Stack Web Development" />
            </div>
            <div class="modal-actions">
                <button type="button" class="btn-cancel" onclick="closeModal()">Cancel</button>
                <button type="button" class="btn-add" onclick="handleAddTrack()">Save Track</button>
            </div>
        </form>
    </div>

    <!-- EDIT STUDENT MODAL -->
    <div id="modal-edit-student" class="modal-box hidden">
        <h2 class="modal-title">Edit Student</h2>
        <form id="editStudentForm">
            <input type="hidden" id="edit-student-id" />
            <input type="hidden" id="edit-user-id" />
            <div class="form-group">
                <label>Student Name</label>
                <input type="text" id="edit-stud-name" class="form-input" required />
            </div>
            <div class="form-group">
                <label>Email</label>
                <input type="email" id="edit-stud-email" class="form-input" required />
            </div>
            <div class="form-group">
                <label>Branch</label>
                <select id="edit-stud-branch" class="form-input" required>
                    <option value="">Select Branch</option>
                    @foreach (var branch in ViewBag.Branches)
                    {
                        <option value="@branch.BranchId">@branch.BranchName</option>
                    }
                </select>
            </div>
            <div class="form-group">
                <label>Track</label>
                <select id="edit-stud-track" class="form-input" required>
                    <option value="">Select Track</option>
                    @foreach (var track in ViewBag.Tracks)
                    {
                        <option value="@track.TrackId">@track.TrackName</option>
                    }
                </select>
            </div>
            <div class="form-group">
                <label>Intake Number</label>
                <input type="number" id="edit-stud-intake" class="form-input" required />
            </div>
            <div class="modal-actions">
                <button type="button" class="btn-cancel" onclick="closeModal()">Cancel</button>
                <button type="button" class="btn-add" onclick="handleUpdateStudent()">Update Student</button>
            </div>
        </form>
    </div>

    <!-- EDIT INSTRUCTOR MODAL -->
    <div id="modal-edit-instructor" class="modal-box hidden">
        <h2 class="modal-title">Edit Instructor</h2>
        <form id="editInstructorForm">
            <input type="hidden" id="edit-instructor-id" />
            <input type="hidden" id="edit-inst-user-id" />
            <div class="form-group">
                <label>Full Name</label>
                <input type="text" id="edit-inst-name" class="form-input" required />
            </div>
            <div class="form-group">
                <label>Email</label>
                <input type="email" id="edit-inst-email" class="form-input" required />
            </div>
            <div class="form-group">
                <label>Password (leave empty to keep current)</label>
                <input type="password" id="edit-inst-password" class="form-input" placeholder="******" />
            </div>
            <div class="modal-actions">
                <button type="button" class="btn-cancel" onclick="closeModal()">Cancel</button>
                <button type="button" class="btn-add" onclick="handleUpdateInstructor()">Update Instructor</button>
            </div>
        </form>
    </div>

    <!-- EDIT COURSE MODAL -->
    <div id="modal-edit-course" class="modal-box hidden">
        <h2 class="modal-title">Edit Course</h2>
        <form id="editCourseForm">
            <input type="hidden" id="edit-course-id" />
            <div class="form-group">
                <label>Course Name</label>
                <input type="text" id="edit-course-name" class="form-input" required />
            </div>
            <div class="form-group">
                <label>Tries Limit (Optional)</label>
                <input type="number" id="edit-course-tries" class="form-input" min="1" placeholder="Leave empty for unlimited" />
            </div>
            <div class="modal-actions">
                <button type="button" class="btn-cancel" onclick="closeModal()">Cancel</button>
                <button type="button" class="btn-add" onclick="handleUpdateCourse()">Update Course</button>
            </div>
        </form>
    </div>

    <!-- EDIT BRANCH MODAL -->
    <div id="modal-edit-branch" class="modal-box hidden">
        <h2 class="modal-title">Edit Branch</h2>
        <form id="editBranchForm">
            <input type="hidden" id="edit-branch-id" />
            <div class="form-group">
                <label>Branch Name</label>
                <input type="text" id="edit-branch-name" class="form-input" required />
            </div>
            <div class="form-group">
                <label>Branch Location</label>
                <input type="text" id="edit-branch-location" class="form-input" required />
            </div>
            <div class="modal-actions">
                <button type="button" class="btn-cancel" onclick="closeModal()">Cancel</button>
                <button type="button" class="btn-add" onclick="handleUpdateBranch()">Update Branch</button>
            </div>
        </form>
    </div>

    <!-- EDIT TRACK MODAL -->
    <div id="modal-edit-track" class="modal-box hidden">
        <h2 class="modal-title">Edit Track</h2>
        <form id="editTrackForm">
            <input type="hidden" id="edit-track-id" />
            <div class="form-group">
                <label>Track Name</label>
                <input type="text" id="edit-track-name" class="form-input" required />
            </div>
            <div class="modal-actions">
                <button type="button" class="btn-cancel" onclick="closeModal()">Cancel</button>
                <button type="button" class="btn-add" onclick="handleUpdateTrack()">Update Track</button>
            </div>
        </form>
    </div>

    <!-- DELETE CONFIRMATION MODAL -->
    <div id="modal-delete-confirm" class="modal-box delete-modal-container hidden">
        <div class="icon-box">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                <line x1="12" y1="9" x2="12" y2="13"></line>
                <line x1="12" y1="17" x2="12.01" y2="17"></line>
            </svg>
        </div>
        <h2 id="delete-title">Delete Item</h2>
        <p class="confirm-text">Are you sure you want to delete</p>
        <span class="target-text" id="delete-target-name">this item</span>
        <p class="warning-details" id="delete-warning-details">
            This action cannot be undone.
        </p>

        <div class="button-row">
            <button type="button" class="btn-cancel" onclick="closeModal()">Cancel</button>
            <button type="button" class="btn-delete-red" onclick="performDelete()">Delete</button>
        </div>
        <input type="hidden" id="delete-id" />
        <input type="hidden" id="delete-entity-type" />
    </div>
</div>

@section Scripts {
    <script src="~/js/admin.js"></script>
}